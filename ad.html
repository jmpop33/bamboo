<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ê´€ë¦¬ì í˜ì´ì§€</title>
  <style>
    body {
      font-family: sans-serif;
      background-color: #f0f6ff;
      padding: 40px;
    }
    h1 { color: #004080; }
    table {
      width: 100%;
      border-collapse: collapse;
      background: white;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 10px;
      text-align: center;
    }
    th {
      background-color: #007bff;
      color: white;
    }
    button {
      padding: 6px 12px;
      background-color: #dc3545;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    .logout {
      margin-top: 20px;
      background-color: #6c757d;
    }
  </style>
</head>
<body>

<h1>ê´€ë¦¬ì í˜ì´ì§€ - íšŒì› ëª©ë¡</h1>

<table>
  <thead>
    <tr>
      <th>ì´ë¦„</th>
      <th>ë‚˜ì´</th>
      <th>í•™êµ</th>
      <th>ì•„ì´ë””</th>
      <th>ë¹„ë°€ë²ˆí˜¸</th>
      <th>ì‚­ì œ</th>
    </tr>
  </thead>
  <tbody id="userTable"></tbody>
</table>

<button class="logout" onclick="logout()">ë¡œê·¸ì•„ì›ƒ</button>

<script>
  /* ğŸ” ê´€ë¦¬ì ì ‘ê·¼ ì œí•œ */
  if (sessionStorage.getItem("admin") !== "true") {
    alert("ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤.");
    location.href = "login.html";
  }

  function renderUsers() {
    const users = JSON.parse(localStorage.getItem("users")) || [];
    const tbody = document.getElementById("userTable");
    tbody.innerHTML = "";

    users.forEach(user => {
      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td>${user.name}</td>
        <td>${user.age}</td>
        <td>${user.school}</td>
        <td>${user.id}</td>
        <td>${user.pw}</td>
        <td>
          <button onclick="deleteUser('${user.id}')">ì‚­ì œ</button>
        </td>
      `;
      tbody.appendChild(tr);
    });
  }

  function deleteUser(id) {
    if (!confirm("ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) return;

    let users = JSON.parse(localStorage.getItem("users")) || [];
    users = users.filter(user => user.id !== id);
    localStorage.setItem("users", JSON.stringify(users));

    alert("ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
    renderUsers();
  }

  function logout() {
    sessionStorage.clear();
    location.href = "login.html";
  }

  renderUsers();
</script>

</body>
</html>
