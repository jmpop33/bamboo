<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>관리자 페이지</title>
<style>
body { font-family: sans-serif; background-color: #f0f6ff; padding: 40px; }
h1 { color: #004080; }
table { width: 100%; border-collapse: collapse; background: white; }
th, td { border: 1px solid #ccc; padding: 10px; text-align: center; }
th { background-color: #007bff; color: white; }
button { padding: 6px 12px; background-color: #dc3545; color: white; border: none; border-radius: 4px; cursor: pointer; }
.logout { margin-top: 20px; background-color: #6c757d; }
</style>
</head>
<body>

<h1>관리자 페이지 - 회원 목록</h1>
<table>
  <thead>
    <tr>
      <th>이름</th>
      <th>나이</th>
      <th>학교</th>
      <th>전화번호</th>
      <th>아이디</th>
      <th>비밀번호</th>
      <th>삭제</th>
    </tr>
  </thead>
  <tbody id="userTable"></tbody>
</table>

<button class="logout" onclick="logout()">로그아웃</button>

<script>
if (sessionStorage.getItem("admin") !== "true") {
  alert("접근 권한이 없습니다."); location.href="login.html";
}

function renderUsers() {
  const users = JSON.parse(localStorage.getItem("users")) || [];
  const tbody = document.getElementById("userTable");
  tbody.innerHTML = "";

  users.forEach(user => {
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${user.name}</td>
      <td>${user.age}</td>
      <td>${user.school}</td>
      <td>${user.phone}</td>
      <td>${user.id}</td>
      <td>${user.pw}</td>
      <td><button onclick="deleteUser('${user.id}')">삭제</button></td>
    `;
    tbody.appendChild(tr);
  });
}

function deleteUser(id) {
  if (!confirm("정말 삭제하시겠습니까?")) return;
  let users = JSON.parse(localStorage.getItem("users")) || [];
  users = users.filter(u => u.id !== id);
  localStorage.setItem("users", JSON.stringify(users));
  renderUsers();
}

function logout() {
  sessionStorage.clear();
  location.href="login.html";
}

renderUsers();
</script>
</body>
</html>
